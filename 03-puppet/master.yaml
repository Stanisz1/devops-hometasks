---
 - name: master
   become: yes
   hosts: all

   tasks:

      - name: install sshpass
        become: yes
        yum:
          name: sshpass
          state: present

      - name: disable key check
        become: yes
        ini_file:
          path: /etc/ansible/ansible.cfg
          section: defaults
          option: host_key_checking
          value: False

      - name: playbook for all
        copy:
           src: /vagrant/playbook.yaml
           dest: /home/vagrant/playbook.yaml

      - name: inventory for all
        copy:
           src: /vagrant/inventory.yaml
           dest: /home/vagrant/inventory.yaml

      - name: use playbook and inventory
        become: yes
        shell: ansible-playbook playbook.yaml -i inventory.yaml  